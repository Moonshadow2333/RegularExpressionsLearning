### 子表达式
#### 引入子表达式
##### 例子：
HTML开发人员经常在单词之间放置一些不间断空格（用`&nbsp;`表示），以确保文本不会在这些单词之间折行。假设你需要找出所有重复的HTML不间断空格，将其用其他内容替换掉。
```
Regular&nbsp;&nbsp;Expression, and other subjects.

正则表达式：
&nbsp;{2,}
```
##### 结果：
啥也没匹配到。
##### 分析：
这个问题的目的是匹配连续两个或多个`&nbsp;`。
而正则表达式：`&nbsp;{2,}`匹配的是`&nbsp`后面紧跟连续两个或多个`;`，即`&nbsp;;;;;;;`。
原因在于：重复匹配的元字符（如`?`和`*`）**只作用于跟前的字符或元字符。**
要解决这个问题，就需要用到子表达式，
即：`(&nbsp;){2,}`。
##### 什么是子表达式？
子表达式是更长的表达式的一部分。
##### 划分子表达式的目的
将其视为单一的实体来使用。
#### 使用子表达式进行分组
回到上面的例子：
(`&nbsp;`)是一个子表达式，它被视为单一的实体，所以，紧跟其后的`{2,}`将作用于整个子表达式。问题解决。

##### 分组的例子：
匹配20世纪后的年份。
```
1967, 1981, 2011
正则表达式：
19|20\d{2}
```
##### 结果
`19`67, 1981, `2011`
##### 分析
操作符`|`是OR，`19|20`可以匹配19或20，因此，模式`19或20\d{2}`可以匹配19或20开头的4位数字。
小节：
1. `|`操作符会查看其左右两边的内容。
2. 重复匹配始终作用于跟前的字符或元字符。
故该模式`19`或`20\d{2}`解释为`19`或`20\d{2}`。
#### 子表达式的嵌套
1. 字表达式允许嵌套。
2. 子表达式嵌套的应用：匹配IP地址。

在构造一个正则表达式的时候，一定要定义清楚你想要匹配什么，不想匹配是吗。
##### 分析
一个有效的IP地址中每组数字必须符合以下规则：
1. 任意的1位或2位数字。[0-99]
2. 任意的以1开头的3位数字。[100-199]
3. 任意的以2开头、第二位数字在0到4之间的3位数字。[200-249]
4. 任意的以25开头、第三位数字在0到5之间的3位数字。[250-255]
##### 例子：
[12.159.45.200]

##### 正则表达式
`(((25[0-5])|(2[0-4]\d)|(1\d{2})|(\d{1,2}))\.){3}(((25[0-5])|(2[0-4]\d)|(1\d{2})|(\d{1,2})))`

**注意：**模式是从左到右进行评估的，所以当有4个表达式都可以匹配是，首先测试第一个，然后测试第二个，以此类推。故以下模式则不正确：
`(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5]))\.){3}(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5])))`

结果：
[`12.159.45.20`0]（打开预览模式查看结果）
分析：(`\d{1,2}`)匹配结尾的`200`中`20`，因此其他模式（包括最后那个我们需要的(25[0-5])）甚至都没有进行评估。